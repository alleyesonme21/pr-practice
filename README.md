This code needs some updates. Fork it and make a pull request!

This really cool feature was added by Joseph.